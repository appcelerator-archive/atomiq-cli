{"version":3,"sources":["../../../src/lib/commands/Make.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;AAGA,QAAQ,GAAR,CAAY,IAAZ,GAAmB,eAAK,IAAL,CAAU,eAAK,IAAL,CAAU,SAAV,EAAqB,IAArB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,gBAAvC,EAAyD,MAAzD,IAC3B,eAAK,SAAL,GACA,QAAQ,GAAR,CAAY,IAAZ,CAFF;;AAIA,IAAM,YAAY;AAChB,OAAK,QAAQ,GAAR;AACL,SAAO,SAAP;CAFI;;IAKe;;;;;;;2BAEZ;AACL,WAAK,OAAL,GAAe,uBAAf,CADK;AAEL,WAAK,OAAL,CAAa,iBAAb,GAFK;;;;4BAKC;AACN,4BAAM,EAAN,CAAS,KAAT,EAAgB,QAAhB,EADM;;;;2BAID;AACL,4BAAM,OAAN,CAAc,KAAd,EAAqB,MAArB,EAA6B;AAC3B,iBAAS,IAAT;OADF,EAEG;eAAK,eAAK,OAAL,CAAa,CAAb,KAAmB,KAAnB;OAAL,CAFH,CADK;;;;4BAMC;AACN,4BAAM,SAAN,CAAgB,KAAhB,EAAuB,MAAvB,EADM;;;;4BAIA;AACN,8BAAQ,KAAR,CAAc,SAAd,EADM;;;;8BAIE;AACR,8BAAQ,OAAR,CAAgB,SAAhB,EADQ;;;;+BAIC;AACT,cAAQ,GAAR,CAAY,gBAAZ,EADS;AAET,4BAAM,KAAN,CAAY,OAAZ,EAAqB,CAAC,SAAD,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,MAAzB,EAAiC,eAAjC,CAArB,EAAwE,SAAxE,EAFS;;;;gCAKC;AACV,cAAQ,GAAR,CAAY,8EAAZ,EADU;AAEV,4BAAM,KAAN,CAAY,SAAZ,EACE,CAAC,gBAAD,EAAmB,SAAnB,EAA8B,MAA9B,EAAsC,IAAtC,EAA4C,SAA5C,EAAuD,QAAvD,EAAiE,oCAAjE,CADF,EAEE,SAFF,EAFU;;;;SAlCO","file":"Make.js","sourcesContent":["import Babel from '../BabelHelper';\nimport Compose from '../ComposeHelper';\nimport path from 'path';\nimport Project from '../Project';\nimport Shell from '../ShellHelper';\n\n// include node_modules/.bin in path, just like 'npm run' scripts\nprocess.env.PATH = path.join(path.join(__dirname, '..', '..', '..', './node_modules', '.bin') +\n  path.delimiter +\n  process.env.PATH);\n\nconst spawnopts = {\n  env: process.env,\n  stdio: 'inherit'\n};\n\nexport default class Make {\n\n  init() {\n    this.project = new Project();\n    this.project.checkValidProject();\n  }\n\n  clean() {\n    Shell.rm('-rf', './dist');\n  }\n\n  dist() {\n    Shell.copyDir('src', 'dist', {\n      recurse: true\n    }, f => path.extname(f) != '.js');\n  }\n\n  babel() {\n    Babel.transform('src', 'dist');\n  }\n\n  build() {\n    Compose.build(spawnopts);\n  }\n\n  rebuild() {\n    Compose.rebuild(spawnopts);\n  }\n\n  watchsrc() {\n    console.log('spawning babel');\n    Shell.spawn('babel', ['--watch', 'src', '-d', 'dist', '--source-maps'], spawnopts);\n  }\n\n  watchdist() {\n    console.log('While monitoring, you can also enter \"rs\" in the console to manually restart');\n    Shell.spawn('nodemon',\n      ['--legacy-watch', '--watch', 'dist', '-e', 'js,json', '--exec', 'docker-compose up --force-recreate'],\n      spawnopts);\n  }\n}\n"]}